<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate entry point risk — calc_entry_point_risk • riskintroanalysis</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate entry point risk — calc_entry_point_risk"><meta name="description" content="Calculating the entry point risk associated with each epidemiological unit.
Firstly, an aggregated (points_agg_fun) emission risk is calculated for each entry point. This is
because an entry point can have multiple sources (countries) giving emission
risk.
Then, each entry point is allocated to an epidemiological unit. This is done
by geospatial means, if an entry point is located inside an epidemiological unit's
area it is thus allocated to it. Entry points not located inside any epidemiological
unit are allocated to the nearest one.
Finally, now that each entry point has an emission risk and has been paired
with an epidemiological unit, the aggregated (eu_agg_fun) risk score for each epidemiological
unit is calculated. Giving the final risk of introduction by entry points for
each epidemiological unit."><meta property="og:description" content="Calculating the entry point risk associated with each epidemiological unit.
Firstly, an aggregated (points_agg_fun) emission risk is calculated for each entry point. This is
because an entry point can have multiple sources (countries) giving emission
risk.
Then, each entry point is allocated to an epidemiological unit. This is done
by geospatial means, if an entry point is located inside an epidemiological unit's
area it is thus allocated to it. Entry points not located inside any epidemiological
unit are allocated to the nearest one.
Finally, now that each entry point has an emission risk and has been paired
with an epidemiological unit, the aggregated (eu_agg_fun) risk score for each epidemiological
unit is calculated. Giving the final risk of introduction by entry points for
each epidemiological unit."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">riskintroanalysis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.012</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ri-entry-point-risk.html">Entry points analysis</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate entry point risk</h1>

      <div class="d-none name"><code>calc_entry_point_risk.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculating the entry point risk associated with each epidemiological unit.</p>
<p>Firstly, an aggregated (<code>points_agg_fun</code>) emission risk is calculated for each entry point. This is
because an entry point can have multiple sources (countries) giving emission
risk.</p>
<p>Then, each entry point is allocated to an epidemiological unit. This is done
by geospatial means, if an entry point is located inside an epidemiological unit's
area it is thus allocated to it. Entry points not located inside any epidemiological
unit are allocated to the nearest one.</p>
<p>Finally, now that each entry point has an emission risk and has been paired
with an epidemiological unit, the aggregated (<code>eu_agg_fun</code>) risk score for each epidemiological
unit is calculated. Giving the final risk of introduction by entry points for
each epidemiological unit.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_entry_point_risk</span><span class="op">(</span></span>
<span>  <span class="va">entry_points</span>,</span>
<span>  <span class="va">epi_units</span>,</span>
<span>  <span class="va">emission_risk</span>,</span>
<span>  points_agg_fun <span class="op">=</span> <span class="va">mean</span>,</span>
<span>  eu_agg_fun <span class="op">=</span> <span class="va">max</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-entry-points">entry_points<a class="anchor" aria-label="anchor" href="#arg-entry-points"></a></dt>
<dd><p>The entry points dataset as formatted and validated by <code><a href="https://rdrr.io/pkg/riskintrodata/man/apply_mapping.html" class="external-link">apply_mapping()</a></code> and
<code><a href="https://rdrr.io/pkg/riskintrodata/man/mapping_entry_points.html" class="external-link">mapping_entry_points()</a></code>. This should be an <code>sf</code> object containing points and emission risks.</p></dd>


<dt id="arg-epi-units">epi_units<a class="anchor" aria-label="anchor" href="#arg-epi-units"></a></dt>
<dd><p>The epidemiological units dataset as formatted and validated by <code><a href="https://rdrr.io/pkg/riskintrodata/man/apply_mapping.html" class="external-link">apply_mapping()</a></code> and
<code><a href="https://rdrr.io/pkg/riskintrodata/man/mapping_epi_units.html" class="external-link">mapping_epi_units()</a></code>. This should be an <code>sf</code> object with polygons.</p></dd>


<dt id="arg-emission-risk">emission_risk<a class="anchor" aria-label="anchor" href="#arg-emission-risk"></a></dt>
<dd><p>The emission risk dataset as returned by the <code><a href="calc_emission_risk.html">calc_emission_risk()</a></code>
function.</p></dd>


<dt id="arg-points-agg-fun">points_agg_fun<a class="anchor" aria-label="anchor" href="#arg-points-agg-fun"></a></dt>
<dd><p>Function used to aggrgate emission risk for each entry
point. See description above. Default is <code><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">mean()</a></code>.</p></dd>


<dt id="arg-eu-agg-fun">eu_agg_fun<a class="anchor" aria-label="anchor" href="#arg-eu-agg-fun"></a></dt>
<dd><p>Function used to aggregate emission risk scores for each
epidemiological unit. Default is <code><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">max()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an <code>sf</code> dataset containing the following columns:</p><ul><li><p><code>eu_id</code>: epidemiological units id (from <code>epi_units</code> dataset)</p></li>
<li><p><code>eu_name</code>: epidemiological units name (from <code>epi_units</code> dataset)</p></li>
<li><p><code>entry_points_risk </code>: weighted entry point risk score</p></li>
<li><p><code>risk_sources</code>: informative HTML labels to be used in Leaflet plots</p></li>
</ul><p>This dataset also has a <strong>number of attributes</strong> that are used in other
functions from <code>riskintroanalysis</code> to make passing dataset metadata between
functions more user-friendly.</p><ol><li><p><code>points</code>: is an <code>sf</code> dataset containing the aggregated emission risk score
for each point.  It can be easily accessed with <code><a href="extract-analysis.html">extract_point_risk()</a></code>
and has the following columns:</p><ul><li><p><code>point_id</code>: unique identifier for entry points</p></li>
<li><p><code>point_name</code>: names of entry points</p></li>
<li><p><code>mode</code>: legality or illegality of the entry point</p></li>
<li><p><code>type</code>: transport type of the entry point</p></li>
<li><p><code>source</code>: string of concatenated source countries of entry point</p></li>
<li><p><code>points_label </code>: HTML label for use in leaflet tooltips</p></li>
<li><p>Also attributes: <code>risk_col = "point_emission_risk"</code> and
<code>risk_scale = c(0,12)</code></p></li>
</ul></li>
<li><p><code>risk_col = "entry_points_risk"</code> used by <code><a href="plot_risk.html">plot_risk()</a></code></p></li>
<li><p><code>table_name = "entry_points"</code>used by <code><a href="plot_risk.html">plot_risk()</a></code></p></li>
<li><p><code>scale = c(0, 12)</code> used by <code><a href="plot_risk.html">plot_risk()</a></code> and <code><a href="rescale_risk_scores.html">rescale_risk_scores()</a></code></p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">riskintroanalysis</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">entry_points_fp</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"riskintrodata"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"samples"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"tunisia"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"entry_points"</span>, <span class="st">"BORDER_CROSSING_POINTS.csv"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">entry_points</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="va">entry_points_fp</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">110</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">6</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="font-weight: bold;">Delimiter:</span> ","</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BB0000;">chr</span> (4): NAME, TYPE, MODE, SOURCES</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">dbl</span> (2): LONGITUDE_X, LATITUDE_Y</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">entry_points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/riskintrodata/man/apply_mapping.html" class="external-link">apply_mapping</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  dataset <span class="op">=</span> <span class="va">entry_points</span>,</span></span>
<span class="r-in"><span>  mapping <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/riskintrodata/man/mapping_entry_points.html" class="external-link">mapping_entry_points</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    point_name <span class="op">=</span> <span class="st">"NAME"</span>,</span></span>
<span class="r-in"><span>    lng <span class="op">=</span> <span class="st">"LONGITUDE_X"</span>,</span></span>
<span class="r-in"><span>    lat <span class="op">=</span> <span class="st">"LATITUDE_Y"</span>,</span></span>
<span class="r-in"><span>    mode <span class="op">=</span> <span class="st">"MODE"</span>,</span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="st">"TYPE"</span>,</span></span>
<span class="r-in"><span>    sources <span class="op">=</span> <span class="st">"SOURCES"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  validate <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> All data in "entry_points" valided.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tunisia_raw</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  package <span class="op">=</span> <span class="st">"riskintrodata"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"samples"</span>, <span class="st">"tunisia"</span>, <span class="st">"epi_units"</span>, <span class="st">"tunisia_adm2_raw.gpkg"</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply mapping to prepare colnames and validate dataset</span></span></span>
<span class="r-in"><span><span class="va">tunisia</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/riskintrodata/man/apply_mapping.html" class="external-link">apply_mapping</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">tunisia_raw</span>,</span></span>
<span class="r-in"><span>  mapping <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/riskintrodata/man/mapping_epi_units.html" class="external-link">mapping_epi_units</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    eu_name <span class="op">=</span> <span class="st">"NAME_2"</span>,</span></span>
<span class="r-in"><span>    geometry <span class="op">=</span> <span class="st">"geom"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  validate <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> All data in "epi_units" valided.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">algeria</span> <span class="op">&lt;-</span> <span class="fu">riskintrodata</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/riskintrodata/man/erf_row.html" class="external-link">erf_row</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  iso3 <span class="op">=</span> <span class="st">"DZA"</span>,</span></span>
<span class="r-in"><span>  country <span class="op">=</span> <span class="st">"Algeria"</span>,</span></span>
<span class="r-in"><span>  disease <span class="op">=</span> <span class="st">"Avian infectious laryngotracheitis"</span>,</span></span>
<span class="r-in"><span>  animal_category <span class="op">=</span> <span class="st">"Domestic"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Birds"</span>,</span></span>
<span class="r-in"><span>  disease_notification <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  targeted_surveillance <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  general_surveillance <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  screening <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  precautions_at_the_borders <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  slaughter <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  selective_killing_and_disposal <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  zoning <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  official_vaccination <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  last_outbreak_end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"30/06/2023"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  commerce_illegal <span class="op">=</span> <span class="fl">0L</span>,</span></span>
<span class="r-in"><span>  commerce_legal <span class="op">=</span> <span class="fl">0L</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> All data in "emission_risk_factors" valided.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">libya</span> <span class="op">&lt;-</span> <span class="fu">riskintrodata</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/riskintrodata/man/erf_row.html" class="external-link">erf_row</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  iso3 <span class="op">=</span> <span class="st">"LBY"</span>,</span></span>
<span class="r-in"><span>  country <span class="op">=</span> <span class="st">"Libya"</span>,</span></span>
<span class="r-in"><span>  disease <span class="op">=</span> <span class="st">"Avian infectious laryngotracheitis"</span>,</span></span>
<span class="r-in"><span>  animal_category <span class="op">=</span> <span class="st">"Domestic"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Birds"</span>,</span></span>
<span class="r-in"><span>  disease_notification <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  targeted_surveillance <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  general_surveillance <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  screening <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  precautions_at_the_borders <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  slaughter <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  selective_killing_and_disposal <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  zoning <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  official_vaccination <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  last_outbreak_end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"30/06/2019"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  commerce_illegal <span class="op">=</span> <span class="fl">0L</span>,</span></span>
<span class="r-in"><span>  commerce_legal <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> All data in "emission_risk_factors" valided.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">wahis_erf</span> <span class="op">&lt;-</span> <span class="fu">riskintrodata</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/riskintrodata/man/get_wahis_erf.html" class="external-link">get_wahis_erf</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  disease <span class="op">=</span> <span class="st">"Avian infectious laryngotracheitis"</span>,</span></span>
<span class="r-in"><span>  animal_category <span class="op">=</span> <span class="st">"Domestic"</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="st">"Birds"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> All data in "emission_risk_factors" valided.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> WAHIS emission risk factors dataset has 62 entries for `disease = Avian infectious laryngotracheitis`, `species = Birds`, and `animal_category = Domestic`.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">emission_risk_factors</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">algeria</span>,</span></span>
<span class="r-in"><span>  <span class="va">libya</span>,</span></span>
<span class="r-in"><span>  <span class="va">wahis_erf</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">emission_risk_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="calc_emission_risk.html">calc_emission_risk</a></span><span class="op">(</span>emission_risk_factors <span class="op">=</span> <span class="va">emission_risk_factors</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ri_entry_points</span> <span class="op">&lt;-</span> <span class="fu">calc_entry_point_risk</span><span class="op">(</span></span></span>
<span class="r-in"><span>  entry_points <span class="op">=</span> <span class="va">entry_points</span>,</span></span>
<span class="r-in"><span>  epi_units <span class="op">=</span> <span class="va">tunisia</span>,</span></span>
<span class="r-in"><span>  emission_risk <span class="op">=</span> <span class="va">emission_risk_table</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span><span style="color: #BBBB00;">!</span> There are missing emission risk scores for the following countries:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> BIH missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> BRN missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> ESP missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> FRA missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> HUN missing for 2 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> ISR missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> MAR missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> NOR missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> PAN missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> PER missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> PHL missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> VNM missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> ZAF missing for 1 entry points.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Create new entries in the emission risk factor table using `erf_row()`</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`?riskintrodata::erf_row()`).</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="plot_risk.html">plot_risk</a></span><span class="op">(</span><span class="va">ri_entry_points</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="calc_entry_point_risk-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract-analysis.html">extract_point_risk</a></span><span class="op">(</span><span class="va">ri_entry_points</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 71 features and 6 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: POINT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: 7.572541 ymin: 31.94455 xmax: 11.59319 ymax: 37.26487</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 71 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    point_id point_name             point_emission_risk mode  type  points_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ep-00001 aeroport Djerba                       4.17 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ep-00002 aeroport enfidha                      3.31 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ep-00003 aeroport monastir                     3.75 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ep-00004 aeroport sfax                         3.17 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ep-00005 aeroport tabarka                      4    C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ep-00006 Aeroport tozeur                       2.25 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ep-00007 aeroport tunis cathage                3.58 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ep-00008 bouchebka                             4.25 C     BC    <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ep-00009 dhehiba                               4.25 C     BC    <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ep-00010 haidra                                4.25 C     BC    <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 61 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: geometry &lt;POINT [°]&gt;</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">ri_entry_points</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "eu_id"                   "eu_name"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "entry_points_risk"       "geometry"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "entry_points_risk_label"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $row.names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $class</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "sf"         "tbl_df"     "tbl"        "data.frame"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sf_column</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "geometry"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $agr</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   eu_id                 eu_name       entry_points_risk </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    &lt;NA&gt;                    &lt;NA&gt;                    &lt;NA&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> entry_points_risk_label </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    &lt;NA&gt; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Levels: constant aggregate identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $points</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 71 features and 6 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: POINT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: 7.572541 ymin: 31.94455 xmax: 11.59319 ymax: 37.26487</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 71 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    point_id point_name             point_emission_risk mode  type  points_label</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ep-00001 aeroport Djerba                       4.17 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ep-00002 aeroport enfidha                      3.31 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ep-00003 aeroport monastir                     3.75 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ep-00004 aeroport sfax                         3.17 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ep-00005 aeroport tabarka                      4    C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ep-00006 Aeroport tozeur                       2.25 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ep-00007 aeroport tunis cathage                3.58 C     AIR   <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ep-00008 bouchebka                             4.25 C     BC    <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ep-00009 dhehiba                               4.25 C     BC    <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ep-00010 haidra                                4.25 C     BC    <span style="color: #949494;">&lt;html [1]&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 61 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1 more variable: geometry &lt;POINT [°]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $risk_col</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "entry_points_risk"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $table_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "entry_points"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $scale</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  0 12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>This R package was developed by <a href="https://ardata.fr/" class="external-link">Ardata</a> for CIRAD to provide a tool for analysing geospatial epidemiological.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

